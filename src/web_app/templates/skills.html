<!DOCTYPE html>
<html lang="en" class="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skills Database Explorer - NLP Resume Analyzer</title>
    <link href="{{ url_for('static', filename='css/tw-build.css') }}" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .skill-badge {
            display: inline-block;
            padding: 0.5rem 1rem;
            margin: 0.25rem;
            background: var(--c-card);
            border: 1px solid var(--c-border);
            border-radius: 0.5rem;
            transition: all 0.2s;
        }
        .skill-badge:hover {
            border-color: var(--c-primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(14, 165, 233, 0.15);
        }
        .synonym-tag {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            margin: 0.125rem;
            font-size: 0.75rem;
            background: rgba(14, 165, 233, 0.1);
            color: var(--c-primary);
            border-radius: 0.25rem;
        }
    </style>
</head>
<body class="transition-base min-h-screen bg-gradient-to-br from-sky-50 via-white to-cyan-50 dark:from-slate-900 dark:via-slate-900 dark:to-slate-800">
    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        
        <!-- Header -->
        <header class="text-center mb-12 fade-in">
            <div class="mb-4">
                <a href="/" class="inline-flex items-center text-sm text-slate-600 dark:text-slate-400 hover:text-sky-500 dark:hover:text-sky-400 transition-colors">
                    <span class="mr-2">‚Üê</span>
                    Back to Analyzer
                </a>
            </div>
            <h1 class="text-4xl md:text-5xl font-bold tracking-tight mb-4">
                <span class="bg-gradient-to-r from-sky-500 to-cyan-400 bg-clip-text text-transparent">Skills Database</span>
            </h1>
            <p class="text-lg text-slate-600 dark:text-slate-400 max-w-2xl mx-auto">
                Explore the comprehensive skill taxonomy used in resume analysis
            </p>
        </header>

        <!-- Statistics Cards -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12 fade-in" style="animation-delay: 0.1s;">
            <div class="card-tw text-center">
                <div class="text-3xl font-bold text-sky-600 dark:text-sky-400">{{ stats.total_categories }}</div>
                <div class="text-sm text-slate-600 dark:text-slate-400 mt-1">Categories</div>
            </div>
            <div class="card-tw text-center">
                <div class="text-3xl font-bold text-cyan-600 dark:text-cyan-400">{{ stats.total_skills }}</div>
                <div class="text-sm text-slate-600 dark:text-slate-400 mt-1">Skills</div>
            </div>
            <div class="card-tw text-center">
                <div class="text-3xl font-bold text-sky-600 dark:text-sky-400">{{ stats.total_synonyms }}</div>
                <div class="text-sm text-slate-600 dark:text-slate-400 mt-1">Recognized Variations</div>
            </div>
        </div>

        <!-- Search Bar -->
        <div class="card-tw mb-8 fade-in">
            <div class="flex items-center gap-3">
                <span class="text-slate-400 dark:text-slate-500 text-xl">üîç</span>
                <input 
                    type="text" 
                    id="searchInput" 
                    placeholder="Search skills or categories..." 
                    class="flex-1 bg-transparent border-0 outline-none text-slate-800 dark:text-slate-200 placeholder-slate-400 dark:placeholder-slate-500"
                />
            </div>
        </div>

        <!-- Skills Categories -->
        <div class="space-y-8">
            {% for category, skills in skills_data.items() %}
            <section class="card-tw fade-in category-section" data-category="{{ category|lower }}">
                <!-- Category Header -->
                <div class="flex items-center justify-between mb-6 pb-4 border-b border-slate-200 dark:border-slate-700">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 rounded-lg bg-sky-100 dark:bg-sky-900/40 flex items-center justify-center">
                            <span class="text-sky-600 dark:text-sky-400 font-bold text-lg">{{ skills|length }}</span>
                        </div>
                        <h2 class="text-2xl font-bold text-slate-800 dark:text-slate-100">{{ category }}</h2>
                    </div>
                    <button class="toggle-btn text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors text-2xl font-bold w-8 h-8 flex items-center justify-center" onclick="toggleCategory(this)">
                        <span class="toggle-icon">‚àí</span>
                    </button>
                </div>

                <!-- Skills Grid -->
                <div class="skills-container space-y-4">
                    {% for skill in skills %}
                    <div class="skill-item p-4 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-800/50" data-skill-name="{{ skill.name|lower }}">
                        <div class="flex items-start justify-between mb-3">
                            <h3 class="text-lg font-semibold text-slate-800 dark:text-slate-100">{{ skill.name }}</h3>
                            <span class="text-xs font-medium px-2 py-1 rounded bg-cyan-100 dark:bg-cyan-900/40 text-cyan-700 dark:text-cyan-300">
                                {% if skill.synonyms %}{{ skill.synonyms|length }} variants{% else %}0 variants{% endif %}
                            </span>
                        </div>
                        {% if skill.synonyms %}
                        <div class="flex flex-wrap gap-1">
                            {% for synonym in skill.synonyms %}
                            <span class="synonym-tag">{{ synonym }}</span>
                            {% endfor %}
                        </div>
                        {% else %}
                        <p class="text-sm text-slate-500 dark:text-slate-400 italic">No alternate names recognized</p>
                        {% endif %}
                    </div>
                    {% endfor %}
                </div>
            </section>
            {% endfor %}
        </div>

        <!-- No Results Message -->
        <div id="noResults" class="hidden card-tw text-center py-12">
            <div class="text-6xl mb-4">üîç</div>
            <p class="text-slate-600 dark:text-slate-400 text-lg font-medium">No skills found</p>
            <p class="text-slate-500 dark:text-slate-500 text-sm mt-2">Try a different search term</p>
        </div>

        <!-- Footer -->
        <footer class="text-center mt-16 text-sm text-slate-500 dark:text-slate-400">
            <p>Skills database powers the resume analysis engine</p>
        </footer>
    </div>

    <!-- JavaScript for Search and Toggle -->
    <script>
        // Search functionality
        const searchInput = document.getElementById('searchInput');
        const categories = document.querySelectorAll('.category-section');
        const noResults = document.getElementById('noResults');

        searchInput.addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase().trim();
            let hasVisibleResults = false;

            categories.forEach(category => {
                const categoryName = category.dataset.category.toLowerCase();
                const skills = category.querySelectorAll('.skill-item');
                let categoryHasMatch = false;

                // Check if category name matches
                const categoryMatches = categoryName.includes(searchTerm);

                skills.forEach(skill => {
                    const skillName = skill.dataset.skillName;
                    const synonyms = Array.from(skill.querySelectorAll('.synonym-tag')).map(tag => tag.textContent.toLowerCase());
                    
                    // Check if skill name or any synonym matches
                    const matches = skillName.includes(searchTerm) || 
                                    synonyms.some(syn => syn.includes(searchTerm)) ||
                                    categoryMatches;

                    if (matches || searchTerm === '') {
                        skill.style.display = '';
                        categoryHasMatch = true;
                        hasVisibleResults = true;
                    } else {
                        skill.style.display = 'none';
                    }
                });

                // Show/hide category based on matches
                if (categoryHasMatch || searchTerm === '') {
                    category.style.display = '';
                } else {
                    category.style.display = 'none';
                }
            });

            // Show "no results" message if nothing matches
            if (!hasVisibleResults && searchTerm !== '') {
                noResults.classList.remove('hidden');
                categories.forEach(cat => cat.style.display = 'none');
            } else {
                noResults.classList.add('hidden');
            }
        });

        // Toggle category collapse
        function toggleCategory(button) {
            const section = button.closest('.category-section');
            const container = section.querySelector('.skills-container');
            const icon = button.querySelector('.toggle-icon');
            
            if (container.style.display === 'none') {
                container.style.display = '';
                icon.textContent = '‚àí';  // Minus sign (expanded)
            } else {
                container.style.display = 'none';
                icon.textContent = '+';  // Plus sign (collapsed)
            }
        }

        // Dark mode support
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)');
        if (prefersDark.matches) {
            document.documentElement.classList.add('dark');
        }
    </script>
</body>
</html>
